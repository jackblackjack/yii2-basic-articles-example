<p align="center">
    <h1 align="center">Простейший новостной сайт с авторизацией и оповещением пользователей о событиях<h1>
    <h2 align="center">С использованием базового шаблона yii2 (https://github.com/yiisoft/yii2-app-basic)</h2>
    <br>
</p>

## Функциональные требования
----------------------------------
**1.** Регистрация новых пользователей должна осуществляться с подтверждением почтового ящика.

**2.** CRUD управление пользователями.
- Добавление/редактирование пользователей реализовано в модальном окне.
- Требования к фильтрации списка пользователей: 
 - порядковый номер
 - логин пользователя
 - email пользователя
 - дата регистрации пользователя
 - дате последней авторизации пользователя

*Права доступа:* 
- Доступно только роли администратор

**3.** CRUD управление новостями с разграничением прав. 
- Добавление/редактирование новости реализовано в модальном окне (картинка, краткий текст, полный текст). 
- Требования к фильтрации списка новостей:
- по дате добавления (от – до), 
- по названию, 
- по тексту описания
- по статусу (*возможность изменения статуса новости (активна, неактивна) прямо в списке без перезагрузки страницы*).
*Права доступа:*
- Анонимный пользователь может просматривать только краткий текст новости
- Авторизованный пользователь может просматривать полный текст новости
- Редактор может добавлять новости и редактировать/удалять только свои новости
- Администратор - все выше описанное. 

**4.** Постраничный вывод превью новостей на главной странице с дальнейшим полным просмотром. 
У пользователя должна быть возможность изменять количество превью на странице 

**5.** При добавлении новости на сайт, оповещать зарегистрированных пользователей по email и всплывающим уведомлением с возможностью отметить уведомление как прочитанное. 

**6.** Сделать в настройках профиля настройку уведомлений (получать уведомления о новых новостях только на email, в браузер или и то и другое) 

**7.** Оповещать пользователя по email при изменении пароля или создания нового пользователя администратором (выслать новому пользователю на email ссылку для активации профиля и ввода нового пароля для дальнейшей авторизации)


## Создание базового образа
----------------------------------
> **Внимание:** Описание дано без учета случаев возникновения ошибок. В случае возникновения ошибок Вы должны справиться с ними сами. 

**1.** Разверните окружение для разработки.
Установите [VirtualBox](https://www.virtualbox.org/) и [Vagrant](https://www.vagrantup.com/).

**2.** Создайте типовое базовое приложение yii2
```
composer create-project --prefer-dist yiisoft/yii2-app-basic basic
```

**3.** Создайте собственный репозиторий на github.com
```
git init
git add .
git commin -m "First commit"
git remote add origin remote github/repo/url
git push origin master
```
**4.** Запустите виртуальную машину
- Укажите github токен в файле vagrant/config/vagrant-local.yml
```
cd basic
vagrant up
vagrant ssh
```

**5.** Внесите изменения в конфигурацию сервера

- Изменения в php.ini
> **Найти наименование сервиса php7 можно выполнив комнаду:** sudo service --status-all | grep php 

```
sudo sed -i 's/\(;\)\(cgi.fix_pathinfo=\)\([0-9]\+\)/\21/' /etc/php/7.0/fpm/php.ini && sudo service php7.0-fpm restart
```

- Изменения в конфигурации nginx
```
sudo rm -f /etc/nginx/sites-enabled/default && sudo service nginx restart
```

- Внесите изменения в файл config/test_db.php
```
cd /app && sudo sed -i 's/dbname=yii2_basic_tests/\dbname=yii2basic_test/' config/test_db.php
```

- Внесите изменения в composer.json
- В секцию "require":
````
"require": {
    "yii2mod/yii2-rbac": "*"
}
````

- В секцию "require-dev":
````
"require-dev": {
    ...
    "codeception/codeception": "^2.4",
    "codeception/verify": "^1.0",
    "codeception/specify": "^1.0"
}
````
- В секцию "extra":
````
"extra": {
    "yii\\composer\\Installer::postCreateProject": {
        "setPermission": [
            {
                ...
                "migrations": "0755"
            }
        ]
    }
}
````

- **6.** Обновите проект
```
cd /app && composer update
```
